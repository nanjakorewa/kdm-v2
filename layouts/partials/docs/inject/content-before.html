{{- /* メタバー：パンくず + 更新日 + 読了時間 + 編集リンク（ページのみ） */ -}}
{{- if .IsPage -}}
  {{- $parents := .Ancestors -}}
  <div class="meta-bar">
    <nav class="breadcrumbs">
      <a href="{{ site.Home.RelPermalink }}">Home</a>
      {{- with $parents }}
        {{- range .Reverse -}}
          <span class="sep">/</span><a href="{{ .RelPermalink }}">{{ .Title }}</a>
        {{- end -}}
      {{- end }}
      <span class="sep">/</span><span class="current">{{ .Title }}</span>
    </nav>

    <div class="meta">
      <span class="meta-item">最終更新:
        <time datetime="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}">
          {{ .Lastmod.Format (site.Params.BookDateFormat | default "2006-01-02") }}
        </time>
      </span>
      <span class="dot">・</span>
      <span class="meta-item">{{ .ReadingTime }} 分で読めます</span>

      {{- with .File -}}
        {{- $editBase := site.Params.BookEditLink -}}
        {{- if $editBase -}}
          {{- /* Windowsの区切りを/に直し、content/ を前置 */ -}}
          {{- $rel    := .Path -}}
          {{- $posix  := replace $rel "\\" "/" -}}
          {{- $repoP  := printf "content/%s" $posix -}}
          {{- $editURL := cond (in $editBase "%s") (printf $editBase $repoP) (printf "%s%s" $editBase $repoP) -}}
          <span class="dot">・</span>
          <a class="meta-item" href="{{ $editURL }}" target="_blank" rel="noopener">このページを編集</a>
        {{- end -}}
      {{- end -}}
    </div>
  </div>
{{- end -}}
