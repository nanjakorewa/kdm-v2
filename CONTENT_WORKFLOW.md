# コンテンツ翻訳・コード整理ワークフロー

この手順書は、`README.md` と同じ階層で作業するときの共通フローをまとめたものです。  
クラスタリング、次元削減など複数ページにわたって繰り返し適用してください。

## 0. 事前確認
- 乱数の再現性を確保するため、`scripts/generate_basic_assets.py` のシード設定を変更しない。
- 既存の Markdown 内コードは Python 3.13 相当に揃え、型ヒントと Google 形式 docstring を必ず付与する。
- 生成画像は言語別パスを使用し、`*_blockNN_lang.png` の命名規則に従う。

## 1. ベース（日本語）ページの更新
1. 対象ページの `.ja.md` を開き、要約・本文を自然な日本語でリライトする（機械翻訳調は避ける）。
2. 数式・図表の説明も読みやすく整え、必要なら記号を LaTeX に変更。
3. Python コードを関数化し、下記を守る：
   - `from __future__ import annotations` を最上部に置く。
   - 乱数を使う場合は関数引数で `random_state` を受け取り、`numpy.random.default_rng` などで固定。
   - Docstring はページの言語に合わせて自然な文章にする。
   - Docstring は基本的にGoogleスタイルで記述する。
   - 実行例は `print` で主要メトリクスのみ ASCII 文字を使って出力（Windows の CP932 問題を避ける）。
4. 画像参照を `static/images/.../foo_blockNN_ja.png` に合わせて修正。

## 2. 多言語ページの反映
1. `.en.md`, `.es.md`, `.id.md` を順番に開き、日本語版で整えた内容を各言語に合わせて自然に翻訳する。
2. コードは日本語版とシグネチャ・挙動を揃えつつ、Docstring と `print` 文字列を該当言語にする。
3. 画像パスはそれぞれ `_en`, `_es`, `_id` に変更。

## 3. 画像生成と検証
1. ルートで `python scripts/generate_basic_assets.py` を実行。
   - IPAexGothic に関する警告は無視可。
   - 実行後に `gen_assets.log` が残った場合は削除。
2. `static/images/...` に新しい PNG が生成されているか確認。
3. `git status -sb` で変更内容を確認し、意図しないファイルが含まれていないかチェック。

## 4. 追加ヒント
- `eps` や `min_samples` など距離に依存するパラメータを扱うときは、コード内で標準化 (`StandardScaler`) を入れると再現性が高い。
- 画像が複数言語で共有されていた場合は `.ja.png` のみ残りがちなので、不要な `.svg` や旧 PNG の参照を削除する。
- モデル選択（BIC/AIC など）やメトリクスの説明は、本文内で簡潔に触れ、詳細はリファレンスに任せる。

以上の手順を 1 ページごとに繰り返すことで、翻訳とコード整理の品質を一定に保てます。作業前には必ず本ファイルを参照してください。
