<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>テーブルデータ全般 on K_DM Book</title>
    <link>http://localhost:1313/prep/table/</link>
    <description>Recent content in テーブルデータ全般 on K_DM Book</description>
    <generator>Hugo</generator>
    <language>ja</language>
    <atom:link href="http://localhost:1313/prep/table/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>pdfから表を抽出</title>
      <link>http://localhost:1313/prep/table/extract_table_from_pdf/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/prep/table/extract_table_from_pdf/</guid>
      <description>&lt;div class=&#34;youtube-embed&#34;&gt;&#xD;&#xA;  &lt;iframe loading=&#34;lazy&#34; class=&#34;youtube-video&#34; src=&#34;https://www.youtube.com/embed/iuBG4s-xbOo&#34; title=&#34;YouTube video player&#34; allow=&#34;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&#34; allowfullscreen&gt;&lt;/iframe&gt;&#xD;&#xA;&lt;/div&gt;&#xA;&lt;h2 id=&#34;camelotを使う場合&#34;&gt;&#xA;  camelotを使う場合&#xA;  &#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#camelot%e3%82%92%e4%bd%bf%e3%81%86%e5%a0%b4%e5%90%88&#34;&gt;#&lt;/a&gt;&#xA;  &#xA;&lt;/h2&gt;&#xA;&lt;h3 id=&#34;必要なライブラリをインストール&#34;&gt;&#xA;  必要なライブラリをインストール&#xA;  &#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%bf%85%e8%a6%81%e3%81%aa%e3%83%a9%e3%82%a4%e3%83%96%e3%83%a9%e3%83%aa%e3%82%92%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab&#34;&gt;#&lt;/a&gt;&#xA;  &#xA;&lt;/h3&gt;&#xA;&lt;p&gt;今回はCamelotというライブラリを使ってpdfからテーブルを抽出します。&#xA;&lt;code&gt;opencv-contrib-python&lt;/code&gt;、&lt;code&gt;camelot&lt;/code&gt;、&lt;code&gt;tabula-py&lt;/code&gt;が必要なので適宜インストールします。&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;poetry add opencv-contrib-python camelot tabula-py ghostscript&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Ghostscriptというソフトウェアも必要なのでインストールします。&#xA;OSによってインストール方法が異なるので注意してください。&#xA;インストール方法は&lt;a href=&#34;https://camelot-py.readthedocs.io/en/master/user/install-deps.html&#34;&gt;こちら&lt;/a&gt;を参照してください。&lt;/p&gt;&#xA;&lt;h3 id=&#34;ghostscriptがインストールされているか確認する&#34;&gt;&#xA;  ghostscriptがインストールされているか確認する&#xA;  &#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#ghostscript%e3%81%8c%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab%e3%81%95%e3%82%8c%e3%81%a6%e3%81%84%e3%82%8b%e3%81%8b%e7%a2%ba%e8%aa%8d%e3%81%99%e3%82%8b&#34;&gt;#&lt;/a&gt;&#xA;  &#xA;&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; ctypes.util &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; find_library&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;find_library(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;gs&amp;#34;&lt;/span&gt;)  &lt;span style=&#34;color:#75715e&#34;&gt;# gsが実行可能ならば /usr/local/lib/libgs.dylibなどの表示がされます&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;&#39;/usr/local/lib/libgs.dylib&#39;&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h3 id=&#34;pdfからテーブルを抽出する&#34;&gt;&#xA;  pdfからテーブルを抽出する&#xA;  &#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#pdf%e3%81%8b%e3%82%89%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%82%92%e6%8a%bd%e5%87%ba%e3%81%99%e3%82%8b&#34;&gt;#&lt;/a&gt;&#xA;  &#xA;&lt;/h3&gt;&#xA;&lt;p&gt;例として&lt;a href=&#34;https://www.soumu.go.jp/menu_yosan/yosan.html#r4&#34;&gt;総務省のページで公開されている「政策ごとの予算との対応について」のpdf&lt;/a&gt;からテーブルを抽出します。テーブルがパースできたことがわかります。&lt;/p&gt;&#xA;&lt;p&gt;※jupyterbookでエラーが出る場合があるためコメントアウトしています&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; camelot&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# pdfを読み込んでテーブルを抽出&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# pdf_name = &amp;#34;000788423.pdf&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# tables = camelot.read_pdf(pdf_name)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# print(&amp;#34;パースできたテーブル数&amp;#34;, tables.n)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 先頭５行のみ表示&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# tables[0].df.head()&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;今度はFLEX LNGという会社の決算情報をパースしてみます。&#xA;データは&lt;a href=&#34;https://www.flexlng.com/investor-home/&#34;&gt;FLEXLNG｜Investor Home&lt;/a&gt;で取得したファイルで実行しています。&#xA;今後はテーブルのパースに失敗してしましました。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# pdfを読み込んでテーブルを抽出&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pdf_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;flex-lng-earnings-release-q3-2021.pdf&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tables &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; camelot&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;read_pdf(pdf_name)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;パースできたテーブル数&amp;#34;&lt;/span&gt;, tables&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;n)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 先頭５行のみ表示&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# tables[0].df.head()&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;パースできたテーブル数 0&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;tabula-py-を使う場合&#34;&gt;&#xA;  tabula-py を使う場合&#xA;  &#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#tabula-py-%e3%82%92%e4%bd%bf%e3%81%86%e5%a0%b4%e5%90%88&#34;&gt;#&lt;/a&gt;&#xA;  &#xA;&lt;/h2&gt;&#xA;&lt;p&gt;&lt;code&gt;poetry add tabula-py&lt;/code&gt;などとしてtabulaをインストールしてください。&#xA;tabulaはバックグラウンドで&lt;a href=&#34;https://github.com/tabulapdf/tabula-java&#34;&gt;tabula-java&#xA;&lt;/a&gt;を使用していますが、Javaのバージョンが古い場合こちらがエラーになる場合があるようです。&lt;/p&gt;</description>
    </item>
    <item>
      <title>処理の進捗を表示</title>
      <link>http://localhost:1313/prep/table/show_progress/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/prep/table/show_progress/</guid>
      <description>&lt;p&gt;pandasでデータ加工をする時、時間がかかる場合があります。&#xA;この時にtqdmを用いて進捗を表示することができます。&lt;/p&gt;&#xA;&#xD;&#xA;&lt;div class=&#34;notices document&#34; &gt;&lt;p&gt;&lt;a href=&#34;https://github.com/tqdm/tqdm#table-of-contents&#34;&gt;tqdm Pandas Integration&lt;/a&gt;&lt;/p&gt;&#xA;&lt;/div&gt;&#xD;&#xA;&#xA;&#xA;&lt;blockquote class=&#39;book-hint &#39;&gt;&#xA;  &lt;p&gt;Due to popular demand we&amp;rsquo;ve added support for pandas &amp;ndash; here&amp;rsquo;s an example for DataFrame.progress_apply and DataFrameGroupBy.progress_apply:&lt;/p&gt;&#xA;&lt;/blockquote&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt; pd&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;df &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;read_csv(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;../data/sample.csv&amp;#34;&lt;/span&gt;)[:&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;!-- raw HTML omitted --&gt;&#xA;&lt;pre&gt;&lt;code&gt;.dataframe tbody tr th {&#xD;&#xA;    vertical-align: top;&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;.dataframe thead th {&#xD;&#xA;    text-align: right;&#xD;&#xA;}&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;&#xA;&lt;!-- raw HTML omitted --&gt;&#xA;&lt;h1 id=&#34;処理の進捗を表示する&#34;&gt;&#xA;  処理の進捗を表示する&#xA;  &#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%87%a6%e7%90%86%e3%81%ae%e9%80%b2%e6%8d%97%e3%82%92%e8%a1%a8%e7%a4%ba%e3%81%99%e3%82%8b&#34;&gt;#&lt;/a&gt;&#xA;  &#xA;&lt;/h1&gt;&#xA;&lt;p&gt;&lt;code&gt;rand_with_sleep(x: int)&lt;/code&gt;はランダムな時間だけ待機して待機した時間(sec)を返します。&lt;/p&gt;&#xA;&lt;p&gt;&lt;code&gt;df[&amp;quot;人口総数&amp;quot;]&lt;/code&gt; には待機した時間が記録され、この処理の進捗のプログレスバーが表示されます。&lt;/p&gt;</description>
    </item>
    <item>
      <title>パターンマッチで列を選択</title>
      <link>http://localhost:1313/prep/table/select_column_by_column_name/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/prep/table/select_column_by_column_name/</guid>
      <description>&lt;h2 id=&#34;サンプルデータ&#34;&gt;&#xA;  サンプルデータ&#xA;  &#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e3%82%b5%e3%83%b3%e3%83%97%e3%83%ab%e3%83%87%e3%83%bc%e3%82%bf&#34;&gt;#&lt;/a&gt;&#xA;  &#xA;&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt; pd&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;X &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;read_csv(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;../data/sample.csv&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;X&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;!-- raw HTML omitted --&gt;&#xA;&lt;pre&gt;&lt;code&gt;.dataframe tbody tr th {&#xD;&#xA;    vertical-align: top;&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;.dataframe thead th {&#xD;&#xA;    text-align: right;&#xD;&#xA;}&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;&#xA;&lt;!-- raw HTML omitted --&gt;&#xA;&lt;h2 id=&#34;sklearncomposemake_column_selector&#34;&gt;&#xA;  sklearn.compose.make_column_selector&#xA;  &#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#sklearncomposemake_column_selector&#34;&gt;#&lt;/a&gt;&#xA;  &#xA;&lt;/h2&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://scikit-learn.org/stable/modules/generated/sklearn.compose.make_column_selector.html&#34;&gt;sklearn.compose.make_column_selector&lt;/a&gt;&#xA;を使用します。&lt;code&gt;pattern=&amp;quot;暦&amp;quot;&lt;/code&gt;で暦が含まれる列を選択し、StandardScalerを適用します。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.preprocessing &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; StandardScaler&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.compose &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; make_column_transformer&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.compose &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; make_column_selector&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;n_ss &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; StandardScaler()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 暦が含まれる列のみスケーリング&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ct &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; make_column_transformer(&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    (n_ss, make_column_selector(pattern&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;暦&amp;#34;&lt;/span&gt;)), sparse_threshold&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;X_transform &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ct&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fit_transform(X)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 変換後のテーブル&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataFrame(X_transform)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;!-- raw HTML omitted --&gt;&#xA;&lt;pre&gt;&lt;code&gt;.dataframe tbody tr th {&#xD;&#xA;    vertical-align: top;&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;.dataframe thead th {&#xD;&#xA;    text-align: right;&#xD;&#xA;}&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>一括で特徴ベクトル化</title>
      <link>http://localhost:1313/prep/table/table2fv/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/prep/table/table2fv/</guid>
      <description>&lt;h2 id=&#34;サンプルデータ&#34;&gt;&#xA;  サンプルデータ&#xA;  &#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e3%82%b5%e3%83%b3%e3%83%97%e3%83%ab%e3%83%87%e3%83%bc%e3%82%bf&#34;&gt;#&lt;/a&gt;&#xA;  &#xA;&lt;/h2&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt; pd&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;X &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;read_csv(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;../data/sample.csv&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;X&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;!-- raw HTML omitted --&gt;&#xA;&lt;pre&gt;&lt;code&gt;.dataframe tbody tr th {&#xD;&#xA;    vertical-align: top;&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;.dataframe thead th {&#xD;&#xA;    text-align: right;&#xD;&#xA;}&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;&#xA;&lt;!-- raw HTML omitted --&gt;&#xA;&lt;h2 id=&#34;make_column_transformer&#34;&gt;&#xA;  make_column_transformer&#xA;  &#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#make_column_transformer&#34;&gt;#&lt;/a&gt;&#xA;  &#xA;&lt;/h2&gt;&#xA;&lt;p&gt;sklearn.compose.make_column_transformerを使用します。指定した複数列に対して、一括で前処理方法を指定します。&lt;/p&gt;&#xA;&#xD;&#xA;&lt;div class=&#34;notices document&#34; &gt;&lt;p&gt;&lt;a href=&#34;https://scikit-learn.org/stable/modules/generated/sklearn.compose.make_column_transformer.html&#34;&gt;sklearn.compose.make_column_transformer&lt;/a&gt;&lt;/p&gt;&#xA;&lt;/div&gt;&#xD;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.preprocessing &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; OneHotEncoder&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.preprocessing &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; StandardScaler&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.compose &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; make_column_transformer&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;c_oh &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; OneHotEncoder()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;n_ss &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; StandardScaler()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ct &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; make_column_transformer(&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    (c_oh, [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;元号&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;町名&amp;#34;&lt;/span&gt;]),  &lt;span style=&#34;color:#75715e&#34;&gt;# カテゴリ変数にonehot&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    (n_ss, [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;西暦&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;人口総数&amp;#34;&lt;/span&gt;]),  &lt;span style=&#34;color:#75715e&#34;&gt;# 数値列をスケーリング&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    remainder&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;passthrough&amp;#34;&lt;/span&gt;,  &lt;span style=&#34;color:#75715e&#34;&gt;# 指定の無い列はそのまま&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    sparse_threshold&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;X_transform &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ct&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fit_transform(X)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 変換後のテーブル&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataFrame(X_transform)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;!-- raw HTML omitted --&gt;&#xA;&lt;pre&gt;&lt;code&gt;.dataframe tbody tr th {&#xD;&#xA;    vertical-align: top;&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;.dataframe thead th {&#xD;&#xA;    text-align: right;&#xD;&#xA;}&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
