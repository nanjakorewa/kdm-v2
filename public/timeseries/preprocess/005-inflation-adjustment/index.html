<!DOCTYPE html>
<html lang="ja" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="貨幣価値の影響を受けるデータは、分析前に調整する必要がある時もあります。
ここでは消費者物価指数 (CPI)を用いて時系列データに対してインフレ調整をしてみます。具体的には

FREDから消費者物価指数 (CPI)のデータを、pythonのAPIを用いて取得
アメリカの世帯収入の中央値データを取得
アメリカの世帯収入の中央値データをCPIを用いて調整する
アメリカの世帯収入の中央値データ(調整済み)のデータと、CPIを用いて調整したデータを比較

してみます。

A Python library that quickly adjusts U.S. dollars for inflation using the Consumer Price Index (CPI).


import os
import cpi
import matplotlib.pyplot as plt
import pandas as pd
import seaborn as sns

from full_fred.fred import Fred
from datetime import date


cpi.update()  # 必ず実行する

  FREDからデータを取得する
  
  #
  

FREDから必要なデータを取得します。データの取得方法については別動画で説明していますが、pythonからアクセスするためにはAPIキーの発行が必要です。


  

# FRED_API_KEY = os.getenv(&#39;FRED_API_KEY&#39;)
fred = Fred()
print(f&#34;FRED APIキーが環境変数に設定されている：{fred.env_api_key_found()}&#34;)


def get_fred_data(name, start=&#34;2013-01-01&#34;, end=&#34;&#34;):
    df = fred.get_series_df(name)[[&#34;date&#34;, &#34;value&#34;]].copy()
    df[&#34;date&#34;] = pd.to_datetime(df[&#34;date&#34;])
    df[&#34;value&#34;] = pd.to_numeric(df[&#34;value&#34;], errors=&#34;coerce&#34;)
    df = df.set_index(&#34;date&#34;)

    if end == &#34;&#34;:
        df = df.loc[f&#34;{start}&#34;:]
    else:
        df = df.loc[f&#34;{start}&#34;:f&#34;{end}&#34;]

    return df
FRED APIキーが環境変数に設定されている：True


  Household Income in the United States（世帯収入データ）
  
  #
  

Median Household Income in the United States (MEHOINUSA646N)のデータを確認してみます。このデータは、データの単位が">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/timeseries/preprocess/005-inflation-adjustment/">
  <meta property="og:site_name" content="K_DM Book">
  <meta property="og:title" content="調整">
  <meta property="og:description" content="貨幣価値の影響を受けるデータは、分析前に調整する必要がある時もあります。 ここでは消費者物価指数 (CPI)を用いて時系列データに対してインフレ調整をしてみます。具体的には
FREDから消費者物価指数 (CPI)のデータを、pythonのAPIを用いて取得 アメリカの世帯収入の中央値データを取得 アメリカの世帯収入の中央値データをCPIを用いて調整する アメリカの世帯収入の中央値データ(調整済み)のデータと、CPIを用いて調整したデータを比較 してみます。
A Python library that quickly adjusts U.S. dollars for inflation using the Consumer Price Index (CPI).
import os import cpi import matplotlib.pyplot as plt import pandas as pd import seaborn as sns from full_fred.fred import Fred from datetime import date cpi.update() # 必ず実行する FREDからデータを取得する # FREDから必要なデータを取得します。データの取得方法については別動画で説明していますが、pythonからアクセスするためにはAPIキーの発行が必要です。
# FRED_API_KEY = os.getenv(&#39;FRED_API_KEY&#39;) fred = Fred() print(f&#34;FRED APIキーが環境変数に設定されている：{fred.env_api_key_found()}&#34;) def get_fred_data(name, start=&#34;2013-01-01&#34;, end=&#34;&#34;): df = fred.get_series_df(name)[[&#34;date&#34;, &#34;value&#34;]].copy() df[&#34;date&#34;] = pd.to_datetime(df[&#34;date&#34;]) df[&#34;value&#34;] = pd.to_numeric(df[&#34;value&#34;], errors=&#34;coerce&#34;) df = df.set_index(&#34;date&#34;) if end == &#34;&#34;: df = df.loc[f&#34;{start}&#34;:] else: df = df.loc[f&#34;{start}&#34;:f&#34;{end}&#34;] return df FRED APIキーが環境変数に設定されている：TrueHousehold Income in the United States（世帯収入データ） # Median Household Income in the United States (MEHOINUSA646N)のデータを確認してみます。このデータは、データの単位が">
  <meta property="og:locale" content="ja">
  <meta property="og:type" content="article">
    <meta property="article:section" content="timeseries">
<title>調整 | K_DM Book</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/timeseries/preprocess/005-inflation-adjustment/">
  <link rel="alternate" hreflang="en" href="http://localhost:1313/en/timeseries/preprocess/005-inflation-adjustment/" title="Adjustment">
<link rel="stylesheet" href="/book.min.5c80a20e1f11b0e9dc4cae70ce44083860ffa999a7bf8ab5dab38664fde8a418.css" integrity="sha256-XICiDh8RsOncTK5wzkQIOGD/qZmnv4q12rOGZP3opBg=" crossorigin="anonymous">
  <script defer src="/fuse.min.js"></script>
  <script defer src="/ja.search.min.58d3a47dfc146864a58893dc5fc3dea0c3290cbd2695f142a0697316f5b64e98.js" integrity="sha256-WNOkffwUaGSliJPcX8PeoMMpDL0mlfFCoGlzFvW2Tpg=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr" class="book-kind-page book-type-timeseries">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>K_DM Book</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="検索" aria-label="検索" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>



  



  
    
  
    
  
    
  


  


<ul class="book-languages">
  <li>
    <input type="checkbox" id="languages" class="toggle" />
    <label for="languages" class="flex">
      <a role="button" class="flex flex-auto">
        <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
        <span>日本語</span>
      </a>
    </label>

    <ul>
      
      <li>
        <a href="/en/timeseries/preprocess/005-inflation-adjustment/">
          <span>English</span>
        </a>
      </li>
      
      <li>
        <a href="/es/">
          <span>Español</span>
        </a>
      </li>
      
      <li>
        <a href="/id/">
          <span>Indonesia</span>
        </a>
      </li>
      
    </ul>
  </li>
</ul>














  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/basic/regression/" class="">線形回帰</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/basic/regression/linear_regression/" class="">最小二乗法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/regression/ridge_and_lasso/" class="">リッジ回帰・ラッソ回帰</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/regression/robust_regression/" class="">外れ値と頑健性</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/regression/regressionanalysis/" class="">残差の分析</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/classification/" class="">線形分類</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/basic/classification/logistic_regression/" class="">ロジスティック回帰</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/classification/linear_discriminant_analysis/" class="">判別分析</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/tree/" class="">決定木</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/basic/tree/decision_tree_classifier/" class="">決定木(分類)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/tree/decision_tree_regressor/" class="">決定木(回帰)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/tree/parameter/" class="">決定木のパラメータ</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/tree/rulefit/" class="">RuleFit</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/ensemble/" class="">アンサンブル</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/basic/ensemble/randomforest/" class="">ランダムフォレスト</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/ensemble/stucking/" class="">スタッキング</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/ensemble/adaboost_classification/" class="">Adaboost(分類)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/ensemble/adaboost_regression/" class="">Adaboost(回帰)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/ensemble/gradient_boosting1/" class="">勾配ブースティング</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/ensemble/gradient_boosting2/" class="">勾配ブースティングの可視化</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/clustering/" class="">クラスタリング</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/basic/clustering/k-means1/" class="">k-means</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/clustering/k-means2/" class="">k-means&#43;&#43;</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/clustering/x-means/" class="">X-means</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/dimensionality_reduction/" class="">次元削減</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/basic/dimensionality_reduction/pca/" class="">PCA</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/dimensionality_reduction/svd/" class="">SVD</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/dimensionality_reduction/lda/" class="">LDA</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/dimensionality_reduction/kernel-pca/" class="">Kernel-PCA</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/feature_selection/" class="">特徴選択</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/basic/feature_selection/boruta/" class="">Boruta</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/timeseries/" class="">時系列</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/basic/timeseries/prophet/" class="">Prophetを使ってみる</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/anomaly/" class="">異常検知</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/basic/anomaly/adtk1/" class="">異常検知①</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/basic/anomaly/adtk2/" class="">異常検知②</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>














</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>



  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>調整</h3>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#fredからデータを取得する">FREDからデータを取得する</a></li>
    <li><a href="#household-income-in-the-united-states世帯収入データ">Household Income in the United States（世帯収入データ）</a>
      <ul>
        <li><a href="#cpiを用いて値を調整する">CPIを用いて値を調整する</a></li>
        <li><a href="#調整前と調整後の比較">調整前と調整後の比較</a></li>
      </ul>
    </li>
    <li><a href="#real-median-household-income-in-the-united-states">Real Median Household Income in the United States</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><p>貨幣価値の影響を受けるデータは、分析前に調整する必要がある時もあります。
ここでは消費者物価指数 (CPI)を用いて時系列データに対してインフレ調整をしてみます。具体的には</p>
<ul>
<li>FREDから消費者物価指数 (CPI)のデータを、pythonのAPIを用いて取得</li>
<li>アメリカの世帯収入の中央値データを取得</li>
<li>アメリカの世帯収入の中央値データをCPIを用いて調整する</li>
<li>アメリカの世帯収入の中央値データ(調整済み)のデータと、CPIを用いて調整したデータを比較</li>
</ul>
<p>してみます。</p>

<div class="notices document" ><p><a href="https://palewi.re/docs/cpi/">A Python library that quickly adjusts U.S. dollars for inflation using the Consumer Price Index (CPI).</a></p>
</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> cpi
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#66d9ef">as</span> plt
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> seaborn <span style="color:#66d9ef">as</span> sns
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> full_fred.fred <span style="color:#f92672">import</span> Fred
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> datetime <span style="color:#f92672">import</span> date
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cpi<span style="color:#f92672">.</span>update()  <span style="color:#75715e"># 必ず実行する</span>
</span></span></code></pre></div><h2 id="fredからデータを取得する">
  FREDからデータを取得する
  
  <a class="anchor" href="#fred%e3%81%8b%e3%82%89%e3%83%87%e3%83%bc%e3%82%bf%e3%82%92%e5%8f%96%e5%be%97%e3%81%99%e3%82%8b">#</a>
  
</h2>
<p><a href="https://fred.stlouisfed.org/">FRED</a>から必要なデータを取得します。データの取得方法については別動画で説明していますが、pythonからアクセスするためにはAPIキーの発行が必要です。</p>

<div class="youtube-embed">
  <iframe loading="lazy" class="youtube-video" src="https://www.youtube.com/embed/OjlMTN4Uq0k" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># FRED_API_KEY = os.getenv(&#39;FRED_API_KEY&#39;)</span>
</span></span><span style="display:flex;"><span>fred <span style="color:#f92672">=</span> Fred()
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;FRED APIキーが環境変数に設定されている：</span><span style="color:#e6db74">{</span>fred<span style="color:#f92672">.</span>env_api_key_found()<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_fred_data</span>(name, start<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2013-01-01&#34;</span>, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>):
</span></span><span style="display:flex;"><span>    df <span style="color:#f92672">=</span> fred<span style="color:#f92672">.</span>get_series_df(name)[[<span style="color:#e6db74">&#34;date&#34;</span>, <span style="color:#e6db74">&#34;value&#34;</span>]]<span style="color:#f92672">.</span>copy()
</span></span><span style="display:flex;"><span>    df[<span style="color:#e6db74">&#34;date&#34;</span>] <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>to_datetime(df[<span style="color:#e6db74">&#34;date&#34;</span>])
</span></span><span style="display:flex;"><span>    df[<span style="color:#e6db74">&#34;value&#34;</span>] <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>to_numeric(df[<span style="color:#e6db74">&#34;value&#34;</span>], errors<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;coerce&#34;</span>)
</span></span><span style="display:flex;"><span>    df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>set_index(<span style="color:#e6db74">&#34;date&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> end <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span>:
</span></span><span style="display:flex;"><span>        df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>loc[<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>start<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>:]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>loc[<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>start<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>:<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>end<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> df
</span></span></code></pre></div><pre><code>FRED APIキーが環境変数に設定されている：True
</code></pre>
<h2 id="household-income-in-the-united-states世帯収入データ">
  Household Income in the United States（世帯収入データ）
  
  <a class="anchor" href="#household-income-in-the-united-states%e4%b8%96%e5%b8%af%e5%8f%8e%e5%85%a5%e3%83%87%e3%83%bc%e3%82%bf">#</a>
  
</h2>
<p><a href="https://fred.stlouisfed.org/series/MEHOINUSA646N">Median Household Income in the United States (MEHOINUSA646N)</a>のデータを確認してみます。このデータは、データの単位が</p>

<blockquote class='book-hint '>
  <p>Units:  Current Dollars, Not Seasonally Adjusted</p>
</blockquote><p>となっており、このデータはインフレ調整・季節調整がされていません。
この家計データをCPIを用いて調整してみます。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>data <span style="color:#f92672">=</span> get_fred_data(<span style="color:#e6db74">&#34;MEHOINUSA646N&#34;</span>, start<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2013-01-01&#34;</span>, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>data<span style="color:#f92672">.</span>head()
</span></span></code></pre></div><!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<h3 id="cpiを用いて値を調整する">
  CPIを用いて値を調整する
  
  <a class="anchor" href="#cpi%e3%82%92%e7%94%a8%e3%81%84%e3%81%a6%e5%80%a4%e3%82%92%e8%aa%bf%e6%95%b4%e3%81%99%e3%82%8b">#</a>
  
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>data[<span style="color:#e6db74">&#34;adjusted&#34;</span>] <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    cpi<span style="color:#f92672">.</span>inflate(dollers<span style="color:#f92672">.</span>value, date<span style="color:#f92672">.</span>year) <span style="color:#66d9ef">for</span> date, dollers <span style="color:#f92672">in</span> data<span style="color:#f92672">.</span>iterrows()
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><h3 id="調整前と調整後の比較">
  調整前と調整後の比較
  
  <a class="anchor" href="#%e8%aa%bf%e6%95%b4%e5%89%8d%e3%81%a8%e8%aa%bf%e6%95%b4%e5%be%8c%e3%81%ae%e6%af%94%e8%bc%83">#</a>
  
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">6</span>))
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>lineplot(
</span></span><span style="display:flex;"><span>    data<span style="color:#f92672">=</span>data,
</span></span><span style="display:flex;"><span>    x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;date&#34;</span>,
</span></span><span style="display:flex;"><span>    y<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;value&#34;</span>,
</span></span><span style="display:flex;"><span>    label<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Current Dollars, Not Seasonally Adjusted(MEHOINUSA646N)&#34;</span>,
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>lineplot(data<span style="color:#f92672">=</span>data, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;date&#34;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;adjusted&#34;</span>, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;MEHOINUSA646N adjusted&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>legend()
</span></span></code></pre></div><pre><code>&lt;matplotlib.legend.Legend at 0x28d341a5e80&gt;
</code></pre>
<p><img src="/images/timeseries/preprocess/005-inflation-adjustment_files/005-inflation-adjustment_9_1.png" alt="png" /></p>
<h2 id="real-median-household-income-in-the-united-states">
  Real Median Household Income in the United States
  
  <a class="anchor" href="#real-median-household-income-in-the-united-states">#</a>
  
</h2>
<p>調整済みのデータは<a href="https://fred.stlouisfed.org/series/MEHOINUSA672N">Real Median Household Income in the United States (MEHOINUSA672N)</a>にて提供されています。先ほどインフレ調整したデータ（<code>data</code>の中にある<code>adjusted</code>列の値）とMEHOINUSA672Nの値を比較してみます。調整前の値を消費者物価指数 (CPI)を用いて調整したものは、調整済みの値（MEHOINUSA672N）とほとんど一致するのが期待値です。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>data_real <span style="color:#f92672">=</span> get_fred_data(<span style="color:#e6db74">&#34;MEHOINUSA672N&#34;</span>, start<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2013-01-01&#34;</span>, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>data_real<span style="color:#f92672">.</span>head()
</span></span></code></pre></div><!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">6</span>))
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>lineplot(data<span style="color:#f92672">=</span>data_real, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;date&#34;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;value&#34;</span>, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;MEHOINUSA672N&#34;</span>)
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>lineplot(data<span style="color:#f92672">=</span>data, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;date&#34;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;adjusted&#34;</span>, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;MEHOINUSA646N adjusted&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 確認のため、プロットした値をテキストで表示しています</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> t, v <span style="color:#f92672">in</span> data_real<span style="color:#f92672">.</span>iterrows():
</span></span><span style="display:flex;"><span>    plt<span style="color:#f92672">.</span>text(t, v[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">-</span> <span style="color:#ae81ff">500</span>, <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>v[<span style="color:#ae81ff">0</span>]<span style="color:#e6db74">:</span><span style="color:#e6db74">.2f</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> t, v <span style="color:#f92672">in</span> data<span style="color:#f92672">.</span>iterrows():
</span></span><span style="display:flex;"><span>    plt<span style="color:#f92672">.</span>text(t, v[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">+</span> <span style="color:#ae81ff">500</span>, <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>v[<span style="color:#ae81ff">1</span>]<span style="color:#e6db74">:</span><span style="color:#e6db74">.2f</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>legend()
</span></span></code></pre></div><pre><code>&lt;matplotlib.legend.Legend at 0x28d347968b0&gt;
</code></pre>
<p><img src="/images/timeseries/preprocess/005-inflation-adjustment_files/005-inflation-adjustment_12_1.png" alt="png" /></p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>





  
  
  




  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 
      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    

<aside class="book-toc">
  <div class="book-toc-content">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#fredからデータを取得する">FREDからデータを取得する</a></li>
    <li><a href="#household-income-in-the-united-states世帯収入データ">Household Income in the United States（世帯収入データ）</a>
      <ul>
        <li><a href="#cpiを用いて値を調整する">CPIを用いて値を調整する</a></li>
        <li><a href="#調整前と調整後の比較">調整前と調整後の比較</a></li>
      </ul>
    </li>
    <li><a href="#real-median-household-income-in-the-united-states">Real Median Household Income in the United States</a></li>
  </ul>
</nav>



  </div>
</aside>

 
  </main>

  
</body>
</html>
















