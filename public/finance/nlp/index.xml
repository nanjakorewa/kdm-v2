<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>テキスト処理 on K_DM Book</title>
    <link>http://localhost:1313/finance/nlp/</link>
    <description>Recent content in テキスト処理 on K_DM Book</description>
    <generator>Hugo</generator>
    <language>ja</language>
    <atom:link href="http://localhost:1313/finance/nlp/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>テキストの感情分析</title>
      <link>http://localhost:1313/finance/nlp/001-sentiment-analysis/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/finance/nlp/001-sentiment-analysis/</guid>
      <description>&lt;div class=&#34;youtube-embed&#34;&gt;&#xD;&#xA;  &lt;iframe loading=&#34;lazy&#34; class=&#34;youtube-video&#34; src=&#34;https://www.youtube.com/embed/aEFJUihC81k&#34; title=&#34;YouTube video player&#34; allow=&#34;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&#34; allowfullscreen&gt;&lt;/iframe&gt;&#xD;&#xA;&lt;/div&gt;&#xA;&lt;p&gt;『&lt;a href=&#34;https://www.sciencedirect.com/science/article/pii/S0167811622000477?via%3Dihub&#34;&gt;SiEBERT - English-Language Sentiment Classification&lt;/a&gt;』のモデルを使って英文の感情分類をします。英文の各文章の感情をポジティブ・ネガティブで分類してみたいと思います。&lt;/p&gt;&#xA;&#xD;&#xA;&lt;div class=&#34;notices ref&#34; &gt;&lt;p&gt;Hartmann, Jochen and Heitmann, Mark and Siebert, Christian and Schamp, Christina,&#xA;&amp;ldquo;More than a feeling: Accuracy and Application of Sentiment Analysis&amp;rdquo;, International Journal of Research in Marketing(2022)&lt;/p&gt;&#xA;&lt;/div&gt;&#xD;&#xA;&#xA;&lt;p&gt;ここではhuggingface上の&lt;a href=&#34;https://huggingface.co/siebert/sentiment-roberta-large-english?text=I&amp;#43;like&amp;#43;you.&amp;#43;I&amp;#43;love&amp;#43;you&#34;&gt;siebert/sentiment-roberta-large-english&lt;/a&gt;のモデルを使用しています。Google Colab上でtransformersを使用する場合は事前に&lt;code&gt;transformers&lt;/code&gt;をインストールする必要があります。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; numpy &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt; np&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; transformers &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pipeline&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; IPython.display &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; HTML&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sentiment_pipeline &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pipeline(&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sentiment-analysis&amp;#34;&lt;/span&gt;, model&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;siebert/sentiment-roberta-large-english&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;テキストの各文の感情を分析してみる&#34;&gt;&#xA;  テキストの各文の感情を分析してみる&#xA;  &#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e3%83%86%e3%82%ad%e3%82%b9%e3%83%88%e3%81%ae%e5%90%84%e6%96%87%e3%81%ae%e6%84%9f%e6%83%85%e3%82%92%e5%88%86%e6%9e%90%e3%81%97%e3%81%a6%e3%81%bf%e3%82%8b&#34;&gt;#&lt;/a&gt;&#xA;  &#xA;&lt;/h2&gt;&#xA;&lt;p&gt;テキスト全体を「.」で区切ることで、一文ごとに分けています。&lt;/p&gt;&#xA;&lt;p&gt;ここでは&lt;a href=&#34;https://www.investidorpetrobras.com.br/en/results-and-announcements/results-center/&#34;&gt;Petrobras Webcast – 3rd Quarter Results 2022 November 5, 2022&lt;/a&gt;の文字起こしデータを使用しています。&lt;/p&gt;</description>
    </item>
    <item>
      <title>動画からの音声認識</title>
      <link>http://localhost:1313/finance/nlp/mp32srt/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/finance/nlp/mp32srt/</guid>
      <description>&lt;div class=&#34;youtube-embed&#34;&gt;&#xD;&#xA;  &lt;iframe loading=&#34;lazy&#34; class=&#34;youtube-video&#34; src=&#34;https://www.youtube.com/embed/1-dsqPNcE2Y&#34; title=&#34;YouTube video player&#34; allow=&#34;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&#34; allowfullscreen&gt;&lt;/iframe&gt;&#xD;&#xA;&lt;/div&gt;&#xA;&lt;!-- raw HTML omitted --&gt;&#xA;&lt;h2 id=&#34;仮想環境の作成&#34;&gt;&#xA;  仮想環境の作成&#xA;  &#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e4%bb%ae%e6%83%b3%e7%92%b0%e5%a2%83%e3%81%ae%e4%bd%9c%e6%88%90&#34;&gt;#&lt;/a&gt;&#xA;  &#xA;&lt;/h2&gt;&#xA;&lt;p&gt;Anacondaを使用している場合は、以下のコマンドを順番に実行することで &lt;code&gt;py39-whisper&lt;/code&gt; という名前のpython3.9実行環境が作成されます。&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;conda create -n py39-whisper python=3.9 anaconda&#xD;&#xA;conda activate py39-whisper&#xD;&#xA;pip install git+https://github.com/openai/whisper.git&#xD;&#xA;conda install ffmpeg -c conda-forge&#xD;&#xA;conda install jupyter ipykernel pandas&#xD;&#xA;conda install transformers[sentencepiece]&#xD;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;whisperを使って音声認識を実行する&#34;&gt;&#xA;  whisperを使って音声認識を実行する&#xA;  &#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#whisper%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%e9%9f%b3%e5%a3%b0%e8%aa%8d%e8%ad%98%e3%82%92%e5%ae%9f%e8%a1%8c%e3%81%99%e3%82%8b&#34;&gt;#&lt;/a&gt;&#xA;  &#xA;&lt;/h2&gt;&#xA;&#xD;&#xA;&lt;div class=&#34;notices info&#34; &gt;&lt;p&gt;音声データは『&lt;a href=&#34;https://www.youtube.com/watch?v=tsU0jebpux0&#34;&gt;Flex LNG Q3 2022 Key Takeaways&lt;/a&gt;』の音声を使用しています。&lt;/p&gt;&#xA;&lt;/div&gt;&#xD;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; warnings&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; whisper&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; transformers &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pipeline&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;model &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; whisper&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;load_model(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;base&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;result &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;transcribe(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;FlexLNG_Q3_2022_Key_Takeaways.mp3&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;print(result[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;text&amp;#34;&lt;/span&gt;])&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Hi and welcome to FlexLng&amp;#39;s TURD Quater Highlights. Revenue&amp;#39;s 4D Quater came in at 91 million in line with previous guidance of approximately 90 million. Ernings was strong, net income and adjusted net income was 47.42 million, translating into Ernings per share and adjusted Ernings per share of 88.79 respectively. Freight market during the quarter boomed and this affected both short term and long term rates positively. During the quarter we had three ships...&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;日本語を英語に翻訳する&#34;&gt;&#xA;  日本語を英語に翻訳する&#xA;  &#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e6%97%a5%e6%9c%ac%e8%aa%9e%e3%82%92%e8%8b%b1%e8%aa%9e%e3%81%ab%e7%bf%bb%e8%a8%b3%e3%81%99%e3%82%8b&#34;&gt;#&lt;/a&gt;&#xA;  &#xA;&lt;/h2&gt;&#xA;&lt;p&gt;翻訳の正しさは保証されておらず、また本コードも動作や出力に関しては一切の責任を負えません。&lt;/p&gt;</description>
    </item>
    <item>
      <title>英語から日本語字幕データを作成</title>
      <link>http://localhost:1313/finance/nlp/srt2jp/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/finance/nlp/srt2jp/</guid>
      <description>&lt;div class=&#34;youtube-embed&#34;&gt;&#xD;&#xA;  &lt;iframe loading=&#34;lazy&#34; class=&#34;youtube-video&#34; src=&#34;https://www.youtube.com/embed/1-dsqPNcE2Y&#34; title=&#34;YouTube video player&#34; allow=&#34;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&#34; allowfullscreen&gt;&lt;/iframe&gt;&#xD;&#xA;&lt;/div&gt;&#xA;&lt;!-- raw HTML omitted --&gt;&#xA;&#xD;&#xA;&lt;div class=&#34;notices seealso&#34; &gt;&lt;p&gt;&lt;a href=&#34;https://voicevox.hiroshiba.jp/&#34;&gt;VOICEVOX &amp;ndash; 無料で使える中品質なテキスト読み上げソフトウェア&lt;/a&gt;&lt;/p&gt;&#xA;&lt;/div&gt;&#xD;&#xA;&#xA;&lt;h2 id=&#34;whisperから作成した字幕ファイルを読み込む&#34;&gt;&#xA;  whisperから作成した字幕ファイルを読み込む&#xA;  &#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#whisper%e3%81%8b%e3%82%89%e4%bd%9c%e6%88%90%e3%81%97%e3%81%9f%e5%ad%97%e5%b9%95%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%82%92%e8%aa%ad%e3%81%bf%e8%be%bc%e3%82%80&#34;&gt;#&lt;/a&gt;&#xA;  &#xA;&lt;/h2&gt;&#xA;&lt;p&gt;whisperはデフォルトで &lt;code&gt;.srt&lt;/code&gt;ファイルを書き出します。このファイルの英語の部分を日本語に翻訳します。&#xA;翻訳の正しさは保証されておらず、また本コードも動作や出力に関しては一切の責任を負えません。&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://github.com/openai/whisper&#34;&gt;openai/whisper&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;翻訳に使用するモデル&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://staka.jp/wordpress/?p=413&#34;&gt;ニューラル機械翻訳モデルFuguMT&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://huggingface.co/staka/fugumt-en-ja&#34;&gt;staka/fugumt-en-ja - Hugging Face&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&#xD;&#xA;&lt;div class=&#34;notices info&#34; &gt;&lt;p&gt;音声データは『&lt;a href=&#34;https://www.youtube.com/watch?v=tsU0jebpux0&#34;&gt;Flex LNG Q3 2022 Key Takeaways&lt;/a&gt;』の音声を使用しています。&lt;/p&gt;&#xA;&lt;/div&gt;&#xD;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; warnings&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; transformers &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pipeline&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;MAX_LENGTH &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;400&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;# モデルに入力することができる文字数の上限&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;translator &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pipeline(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;translation&amp;#34;&lt;/span&gt;, model&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;staka/fugumt-en-ja&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;file &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; open(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;FlexLNG_Q3_2022_Key_Takeaways.mp3.srt&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;r&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;lines &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [l&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; l &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; file&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;readlines()]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;lines[:&lt;span style=&#34;color:#ae81ff&#34;&gt;15&lt;/span&gt;]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; [&amp;#39;1&amp;#39;,&#xD;&#xA; &amp;#39;00:00:00,000 --&amp;gt; 00:00:13,240&amp;#39;,&#xD;&#xA; &amp;#34;Hi and welcome to FlexLNG&amp;#39;s third quarter highlights.&amp;#34;,&#xD;&#xA; &amp;#39;&amp;#39;,&#xD;&#xA; &amp;#39;2&amp;#39;,&#xD;&#xA; &amp;#39;00:00:13,240 --&amp;gt; 00:00:18,120&amp;#39;,&#xD;&#xA; &amp;#39;Revenues for the quarter came in at 91 million in line with previous guidance of approximately&amp;#39;,&#xD;&#xA; &amp;#39;&amp;#39;,&#xD;&#xA; &amp;#39;3&amp;#39;,&#xD;&#xA; &amp;#39;00:00:18,120 --&amp;gt; 00:00:19,520&amp;#39;,&#xD;&#xA; &amp;#39;90 million.&amp;#39;,&#xD;&#xA; &amp;#39;&amp;#39;,&#xD;&#xA; &amp;#39;4&amp;#39;,&#xD;&#xA; &amp;#39;00:00:19,520 --&amp;gt; 00:00:26,020&amp;#39;,&#xD;&#xA; &amp;#39;Earnings were strong, net income and adjusted net income was 47 and 42 million, translating&amp;#39;]&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;前処理&#34;&gt;&#xA;  前処理&#xA;  &#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%89%8d%e5%87%a6%e7%90%86&#34;&gt;#&lt;/a&gt;&#xA;  &#xA;&lt;/h2&gt;&#xA;&lt;p&gt;テキストに前処理を加えたいので、ファイルを保存する前にテキストを書き換えます。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
